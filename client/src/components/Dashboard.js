import React, { useState } from 'react';
import styles from './Dashboard.module.css';
import PromptedUser from "./PromptedUser.js";
import DashboardBento from './DashboardBento.js';
import loadingGif from '../images/loading.gif';
import EditUser from './EditUser.js';
import TaskBoard from './TaskBoard.js';

const Dashboard = () => {
    const [textInput, setTextInput] = useState("");
    const [currentPrompt, setCurrentPrompt] = useState("");
    const [result, setResult] = useState({});
    const [loading, setLoading] = useState(false);
    const [showPreview, setShowPreview] = useState(false);
    const [regenerateButton, setRegenerateButton] = useState(false);
    const [editButton, setEditButton] = useState(false);

    const fetchKindo = async (user_prompt_text) => {
        setLoading(true);
        setShowPreview(true);
        try {
            const response = await fetch("http://localhost:8080/kion", {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({prompt: user_prompt_text, is_regenerating: regenerateButton}), // Stringify the data
            });

            if (!response.ok) {
                throw new Error('Network response was not ok');
            }

            const responseData = await response.json();
            setResult(JSON.parse(responseData.result));
            setLoading(false);
            setRegenerateButton(false);
        } catch (error) {
            console.error('Error fetching data:', error);
            setResult("Error fetching data");
        }

    };

    function submitPrompt(){
        if(!loading && textInput.trim() !== ''){
            setCurrentPrompt(textInput)
            setTextInput("");
            fetchKindo(currentPrompt);
        }
    };

    function handleRegenerate(){
        setEditButton(false);
        setRegenerateButton(true);
        fetchKindo(currentPrompt);

    }

    return (
        <div className={styles.dashboard}>
            <h2>Dashboard</h2>

            <div className={styles.dashboardContainer}>
                <div>
                    <DashboardBento
                        name="Prompt"
                        content={<div className={styles.searchContainer}>
                            <input
                                className={styles.searchBar}
                                type="text"
                                placeholder="Type a task"
                                value={textInput}
                                onChange={(e) => setTextInput(e.target.value)}
                                onKeyDown={(e) => {
                                    if(e.key === 'Enter') {
                                        submitPrompt();
                                    }
                                }}
                                disabled={loading}
                            />

                            <div className={styles.searchButton} onClick={submitPrompt}>
                                <svg width="32" height="32" stroke="#e1e1e1" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 135.0">
                                    <defs>
                                        <linearGradient id="linearGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style={{ stopColor: "#a886dc", stopOpacity: 1 }} />
                                            <stop offset="100%" style={{ stopColor: "#798cd1", stopOpacity: 1 }} /> 
                                        </linearGradient>
                                    </defs>
                                    
                                    <path fill="url(#linearGradient)" d="m86.18 47.238-70-30c-1.0742-0.4375-2.3008-0.21484-3.1562 0.56641-0.85547 0.78125-1.1836 1.9883-0.84375 3.0938l7.1797 23.102c0.26562 0.82812 0.86719 1.5039 1.6602 1.8594l9.4805 4.1406-9.4805 4.1211c-0.79297 0.35547-1.3945 1.0312-1.6602 1.8594l-7.2188 23.121c-0.31641 0.92188-0.16797 1.9414 0.39844 2.7344 0.57031 0.79297 1.4844 1.2656 2.4609 1.2656 0.40625-0.003906 0.80469-0.082031 1.1797-0.24219l70-30c1.1055-0.46875 1.8242-1.5586 1.8242-2.7578 0-1.2031-0.71875-2.2891-1.8242-2.7617zm-66.379 27.441 4.8789-15.602 14.52-6.3203v0.003907c1.0977-0.48047 1.8047-1.5664 1.8008-2.7617 0.007812-1.1914-0.70312-2.2734-1.8008-2.7383l-14.52-6.3398-4.8789-15.602 57.578 24.68z"/>
                                </svg>
                            </div>

                            <div className={styles.generatedContainer}>
                                {showPreview && (<p className={styles.currentPrompt}>"{currentPrompt}"</p>)}

                                {showPreview && !loading && (<div className={styles.generatedButtonContainer}>
                                    {editButton && (<div className={styles.generatedButton} onClick={() => setEditButton(false)}>
                                        <span className={`${styles.tooltip} ${styles.tooltipC}`}>Cancel</span>
                                        <svg className={styles.cancel} width="35" height="35" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 135.0">
                                            <path d="m27.461 22.5c-1.2656 0-2.5352 0.48438-3.5039 1.457-1.9414 1.9414-1.9414 5.0703 0 7.0117l19.031 19.031-19.031 19.035c-1.9414 1.9414-1.9414 5.0664 0 7.0078 1.9414 1.9414 5.0703 1.9414 7.0117 0l19.031-19.031 19.031 19.031c1.9414 1.9414 5.0703 1.9414 7.0117 0 1.9414-1.9414 1.9414-5.0664 0-7.0078l-19.031-19.035 19.031-19.031c1.9414-1.9414 1.9414-5.0703 0-7.0117-1.9414-1.9414-5.0703-1.9414-7.0117 0l-19.031 19.031-19.031-19.031c-0.97266-0.97266-2.2383-1.457-3.5039-1.457z"/>
                                        </svg>
                                    </div>)}

                                    <div className={styles.generatedButton} onClick={handleRegenerate}>
                                        <span className={`${styles.tooltip} ${styles.tooltipR}`}>Regenerate</span>
                                        <svg className={styles.regenerate} width="32" height="32" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 135.0">
                                        <defs>
                                            <linearGradient id="linearGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                                <stop offset="0%" style={{ stopColor: "#a886dc", stopOpacity: 1 }} />
                                                <stop offset="100%" style={{ stopColor: "#798cd1", stopOpacity: 1 }} /> 
                                            </linearGradient>
                                        </defs>
                                        
                                            <g>
                                            <path fill="url(#linearGradient)" d="m92.09 51.949c-0.57031 1.9883-0.96875 4.0781-1.4414 5.9102-0.48828 1.8789-1.1094 3.7383-1.9414 5.5117-1.6406 3.5195-4.2109 6.6992-7.7695 8.4492-0.82031 0.42188-1.9688 0.94922 1.4414 4.6211 2.7891 3 3.5703 1.6406 4.25 0.92969 3.1719-3.2109 5.2812-7.2695 7.1406-11.27 0.98047-2.1016 1.7891-4.2891 2.3984-6.5312 0.16016-0.55859 0.30078-1.1211 0.42188-1.6914l0.19141-0.85156 0.16016-0.78125 0.62891-3.1094c0.14063-0.67969 1.3086-1.5-2.2891-2.2812-3.8789-0.85156-3.0117 0.42969-3.1914 1.0703z"/>
                                            <path fill="url(#linearGradient)" d="m91.141 6.2812c-0.19141 3.9492-0.25 7.8984-0.28125 11.859l-0.03125 5.9297c-0.011719 0.66016 0 1.4688-0.019531 2.0391-0.050782-0.050781-0.10156-0.10156-0.14062-0.14844-1.7812-2.0312-3.4883-3.9883-5.3789-6.0195-1.9414-2.0586-4.1211-3.8984-6.4688-5.4688-4.7109-3.1602-10.09-5.2695-15.66-6.2305-5.5781-0.96094-11.359-0.76953-16.93 0.5-5.5781 1.2617-10.969 3.5586-15.941 6.8008-0.57031 0.39062-1.1992 0.82812-1.7812 1.3398-0.55078 0.53125-1.0391 1.1094-1.3398 1.75-0.55859 1.3203-0.32812 2.7812 1.5898 4.3789 1.5781 1.3203 2.8008 1.3281 3.7891 0.85156 0.51172-0.21875 0.98047-0.57031 1.3984-0.96094 0.42969-0.37891 0.87109-0.76172 1.25-1.1016 3.6016-2.9688 7.7305-5.3203 12.211-6.7617 4.4688-1.4414 9.2812-1.9297 13.969-1.2617 4.8906 0.69922 9.6484 2.4805 13.789 5.1914 2.0703 1.3594 3.9883 2.9297 5.7305 4.7109 0.82812 0.83984 1.8086 1.9297 2.7305 2.9102l2.7109 2.9297c-1.9609-0.078125-3.9102-0.19141-5.8711-0.32812-3.9492-0.30078-7.8906-0.76172-11.828-1.4883-1.8398-0.33984-4.5117-0.75-4.5 4.25 0 4.1016 2.5312 3.6719 4.2383 3.6992 3.8711 0.078125 7.7305 0 11.602-0.089844l5.8008-0.12109 1.5-0.019531c0.78125-0.03125 1.5703-0.10938 2.3281-0.32812 1.5312-0.39844 2.9219-1.2188 4.0508-2.2812 1.1797-1.1211 2.0781-2.5586 2.5312-4.1406 0.23828-0.78906 0.35156-1.6094 0.37891-2.4219l0.019532-1.5508 0.070312-6.0586 0.10938-12.129c0-1.3281 1.0195-3.2891-2.6602-3.4219-3.9688-0.12891-2.8906 1.9414-2.9492 3.2109z"/>
                                            <path fill="url(#linearGradient)" d="m3.4883 66.191c0.58984 0.87109 1.2695 1.5586 1.9805 2.1016 0.35938 0.26953 0.71875 0.51172 1.1094 0.73047l0.30859 0.16016 0.17188 0.089844c0.089844 0.039062 0.058594 0.039062 0.35938 0.16016l0.37109 0.12891c0.48828 0.17188 0.98047 0.32031 1.4609 0.42188 1.8906 0.42188 3.5391 0.19922 4.3516-1.75 0.87891-2.1016-0.14062-3.3281-1.7812-4.1719-0.41016-0.21094-0.85937-0.39844-1.3281-0.57031l-0.35938-0.12891-0.17969-0.058593-0.089844-0.03125h-0.03125c-0.089843-0.050782-0.21094-0.10156-0.30859-0.16016-0.57031-0.32031-0.89844-0.64844-0.94922-0.89844-0.070313-0.23047-0.089844-0.57031-0.039063-0.94141 0.039063-0.35938 0.17969-0.76953 0.32812-1.0586 0.16016-0.30078 0.39844-0.60938 0.69141-0.87891 0.14062-0.12891 0.30078-0.26172 0.46094-0.35938 0.078125-0.050781 0.16016-0.10156 0.23828-0.14062 0.050782-0.03125 0.10938-0.058594 0.17969-0.089844l6.0898-1.5117 1.5508-0.39062 0.76953-0.19141c0.33984-0.089844 0.67969-0.19141 1.0117-0.32031 1.3281-0.48828 2.5508-1.2812 3.5391-2.2891 0.98828-1.0117 1.7617-2.2383 2.2305-3.5781 0.12109-0.30859 0.21875-0.71875 0.28906-0.98047l0.19141-0.76953 0.37891-1.5508 1.4883-6.0312 0.050782-0.10156c0.03125-0.058594 0.058593-0.12109 0.10156-0.17969 0.070312-0.12109 0.16016-0.23828 0.26172-0.35156 0.19922-0.23047 0.44141-0.44141 0.71094-0.60938 0.55859-0.35156 1.1094-0.53906 1.75-0.53125 0.62891-0.019531 1.1992 0.16016 1.7695 0.51172 0.26953 0.17188 0.51953 0.37891 0.71875 0.60938 0.10156 0.10938 0.19141 0.23047 0.26953 0.35156 0.039062 0.058594 0.078125 0.12109 0.10938 0.17969l0.050781 0.089843 0.019531 0.03125 1.5508 6.0312 0.39844 1.5508 0.19922 0.78125c0.078125 0.28906 0.17969 0.66016 0.30078 0.98047 0.46875 1.3203 1.2617 2.5195 2.2383 3.5195 1 0.98047 2.1992 1.7617 3.5195 2.2188 0.32031 0.12109 0.69141 0.21875 0.98047 0.30078l0.78125 0.19141 1.5508 0.39062 6.0312 1.5195 0.37891 0.21875c0.12109 0.078124 0.23828 0.17187 0.35156 0.26953 0.23047 0.19922 0.42969 0.44922 0.60156 0.73047 0.33984 0.57031 0.53125 1.1797 0.5 1.8008 0 0.37891-0.039063 0.62109-0.12891 0.92969-0.089843 0.28906-0.23047 0.58984-0.41016 0.85938-0.17969 0.26953-0.39062 0.51953-0.62891 0.71875-0.12109 0.10156-0.23828 0.19141-0.35938 0.26953-0.058594 0.039063-0.12109 0.078126-0.17969 0.10938l-0.10938 0.058593-6.0508 1.4883-1.5508 0.37891-0.78125 0.19141c-0.32812 0.089844-0.67969 0.17969-1.0117 0.30859-1.3398 0.48047-2.5586 1.2695-3.5703 2.2695-1 1.0117-1.8008 2.2383-2.2891 3.5898-0.12891 0.32031-0.23047 0.71094-0.30859 1l-0.19922 0.76953-0.41016 1.5391-1.5898 5.8711-0.03125 0.050781-0.050782 0.089844c-0.03125 0.050782-0.058593 0.10938-0.10156 0.16016-0.070312 0.10938-0.16016 0.21094-0.26172 0.30859-0.19922 0.19922-0.44141 0.39062-0.69922 0.53125-0.26172 0.14844-0.53906 0.26172-0.80859 0.32031-0.12891 0.03125-0.26172 0.050781-0.39062 0.058593h-0.17969-0.23828c-0.17969 0-0.30859-0.03125-0.41016-0.050781-0.12109-0.03125-0.23828-0.070312-0.35938-0.10938-0.25-0.10156-0.5-0.23047-0.71875-0.39844-0.21875-0.17188-0.42188-0.37109-0.57031-0.57031-0.070312-0.10156-0.14062-0.19922-0.17969-0.30078 0-0.011719-0.011719-0.03125-0.019532-0.039063l-0.82812-4.0508-0.42188-2.0781c-0.14844-0.71875-0.23047-1.2812-0.51172-2.3281-0.48047-1.6992-1.4102-3.5195-2.75-4.9805-1.3281-1.4609-3.0508-2.5391-4.6914-3-0.39063-0.12109-0.85156-0.21094-1.1602-0.23828-0.30078-0.019531-0.58984-0.03125-0.87109-0.019531-0.55859 0.019531-1.0781 0.10156-1.5391 0.26172-0.92188 0.32812-1.6211 0.98047-1.9609 2.0898-0.28906 0.91016-0.070313 1.7109 0.46875 2.4414 0.26953 0.35938 0.62891 0.69922 1.0508 1.0312 0.21094 0.16016 0.44141 0.32031 0.67969 0.46875 0.19141 0.14844 0.32031 0.23828 0.48828 0.37891 1.2383 0.94141 2.5586 2.2305 3.0508 3.6406 0.078125 0.21875 0.14844 0.44141 0.19922 0.66016l0.26172 1.0586 0.53906 2.1797 1.0898 4.3594c0.03125 0.12109 0.070313 0.23828 0.10938 0.35938v0.019531l0.058593 0.14062c0.039063 0.10938 0.089844 0.23047 0.14062 0.33984l0.10156 0.19922 0.17188 0.32812c0.10938 0.21875 0.23828 0.42969 0.37109 0.64062 0.26172 0.41016 0.55078 0.78906 0.87109 1.1406 0.62891 0.69922 1.3281 1.3008 2.1016 1.7891 0.76953 0.48828 1.6016 0.87891 2.5 1.1406 0.44922 0.12891 0.92188 0.23047 1.3984 0.30078 0.23828 0.03125 0.48828 0.050781 0.73047 0.070312h0.66016 0.66016c0.23828-0.019531 0.48828-0.039062 0.73047-0.078124 0.48047-0.070313 0.94141-0.17969 1.3906-0.32031 0.89844-0.28125 1.7305-0.67969 2.4883-1.1797 0.76172-0.5 1.4609-1.1016 2.0781-1.8203 0.30859-0.35938 0.60156-0.73828 0.85156-1.1602 0.12891-0.21094 0.25-0.42188 0.35938-0.64844l0.16016-0.32031 0.089844-0.19141 0.019531-0.039062c0.050781-0.10938 0.089844-0.21875 0.12891-0.33984l0.03125-0.089844v-0.039062c0.050781-0.10156 0.078124-0.19922 0.10156-0.30859l1.4688-6.2109 0.37109-1.5508 0.17969-0.78125c0.058594-0.21094 0.058594-0.26953 0.12109-0.41016 0.14844-0.48047 0.42969-0.92188 0.78125-1.3008 0.35938-0.37109 0.78125-0.67188 1.2695-0.85156 0.12109-0.050782 0.23828-0.078126 0.37109-0.12891l0.76953-0.19922 1.5391-0.41016 6.1719-1.6289h0.039062c0.10938-0.039062 0.21094-0.070312 0.30859-0.10938l0.12891-0.050781c0.10156-0.039063 0.21094-0.078125 0.30078-0.12891h0.019532c3.1797-1.5 5.3281-4.8398 5.3203-8.3984 0.019532-0.82812-0.12109-1.8008-0.35938-2.6211-0.25-0.83984-0.60156-1.6289-1.0586-2.3711-0.46094-0.73047-1.0195-1.4102-1.6914-2.0117-0.33984-0.30078-0.69922-0.57812-1.0898-0.82812l-0.85938-0.51172c-0.16016-0.089844-0.35156-0.17969-0.53125-0.25l-0.050781-0.019531-0.17969-0.070313c-0.10156-0.039062-0.21875-0.070312-0.32031-0.10156h-0.019531s-3.6602-0.94141-3.6602-0.94141l-5.1211-1.3203c-0.85156-0.26953-1.5898-0.85938-2.0195-1.6289-0.10156-0.19922-0.21094-0.39062-0.26953-0.60156-0.050782-0.10156-0.058594-0.21094-0.10156-0.32031l-0.16016-0.66016-0.64844-2.6484-1.3008-5.3008c-0.03125-0.10938-0.058594-0.21875-0.10156-0.32031v-0.039062l-0.050782-0.10938c-0.039062-0.10938-0.078125-0.21875-0.12891-0.32031v-0.019531l-0.10156-0.19141-0.16016-0.32031c-0.10938-0.21875-0.23047-0.42188-0.35938-0.60938-0.25-0.39844-0.53125-0.76953-0.82812-1.1094-0.60156-0.67969-1.2812-1.2617-2.0117-1.7383-0.73828-0.48047-1.5391-0.85156-2.4102-1.1211-0.42969-0.12891-0.87891-0.23047-1.3398-0.30078-0.23047-0.03125-0.46875-0.050781-0.69922-0.070312l-0.62891-0.019532h-0.62891c-0.23828 0.03125-0.46875 0.050782-0.71094 0.078125-0.46094 0.070313-0.91016 0.17188-1.3516 0.28906-0.87109 0.26172-1.6797 0.62891-2.4219 1.1094-0.73828 0.46875-1.4297 1.0508-2.0312 1.7305-0.30078 0.33984-0.58984 0.71094-0.83984 1.1094-0.12891 0.19922-0.25 0.39844-0.35937 0.62109l-0.17188 0.32031-0.089843 0.19141c-0.050781 0.10156-0.089844 0.19922-0.12891 0.30078l-0.019531 0.050782-0.039062 0.10937c-0.039063 0.10938-0.070313 0.21875-0.10156 0.32813v0.039062l-1.5898 6.1797-0.59766 2.3086c-0.039062 0.16016-0.050781 0.17188-0.070312 0.23828-0.019532 0.058594-0.03125 0.12109-0.058594 0.17969-0.16016 0.46094-0.44141 0.87891-0.78125 1.2305-0.35156 0.33984-0.76953 0.62109-1.2305 0.78125-0.10938 0.050781-0.23047 0.070312-0.35156 0.10938l-0.76953 0.19141-1.5508 0.37891-6.1914 1.5312c-0.10938 0.03125-0.23047 0.058594-0.33984 0.10156h-0.03125s-0.23047 0.089843-0.23047 0.089843c-0.10938 0.039063-0.23047 0.089844-0.32813 0.14063l-0.050781 0.019531c-0.089843 0.039062-0.37109 0.17969-0.60938 0.30859-0.23828 0.12891-0.46094 0.26953-0.67969 0.41016-0.42969 0.28906-0.82812 0.60156-1.2109 0.94141-0.75 0.69141-1.3984 1.4805-1.9414 2.4297-0.55078 1-0.85938 1.9492-1.0508 2.9805-0.17969 1.0312-0.21094 2.1289 0.03125 3.3281 0.16016 0.87891 0.57812 1.9883 1.1797 2.8594zm6.3789-2.9102h0.011718-0.019531zm-0.12109 0.32031 0.058594-0.14062c0.03125-0.070313 0.058593-0.14063 0.070312-0.17188-0.019531 0.058594-0.26953 0.62109-0.12891 0.30859z"/>
                                            <path fill="url(#linearGradient)" d="m70.77 86.789-0.089843-0.050781-0.03125-0.019531-0.058594-0.019531-2.9414-0.73828c-0.89063-0.21875-1.5781-0.92188-1.8008-1.8008l-0.73828-2.9414v-0.039062l-0.039063-0.058594c-0.30078-0.62891-1.0195-1.0781-1.7109-1.0586-0.69922-0.019531-1.4102 0.42969-1.7109 1.0586l-0.03125 0.058594v0.039062l-0.75 2.9414c-0.21875 0.89062-0.92188 1.5781-1.8008 1.8008l-2.8984 0.73047h-0.039063l-0.039062 0.03125-0.050782 0.03125c-0.37109 0.17969-0.73828 0.51953-0.92969 0.96094s-0.19922 0.92969-0.039063 1.3203c0.32031 0.82031 1.1094 0.94922 1.2695 0.55078 0.03125-0.078126 0.039062-0.14063 0.058594-0.19922 0 0 0.011718 0.011719 0.019531 0.019531h0.019531s-0.039062 0.050781-0.050781 0.089844c-0.35938 0.92188 2.6914 1.4297 3.8281 1.8398l0.19922 0.070312 1.0898 4.3203 0.019532 0.050782 0.03125 0.058594c0.32031 0.66016 1.0781 1.1289 1.8086 1.1094 0.73047 0.011719 1.4805-0.46094 1.7891-1.1211l0.03125-0.070313v-0.03125l0.71875-2.9414c0.21875-0.89062 0.91016-1.5898 1.7891-1.8203l2.8984-0.75 0.039062-0.019532 0.050782-0.019531c0.60937-0.28906 1.0508-0.98828 1.0508-1.6719 0.03125-0.67969-0.35938-1.3906-0.96875-1.7109z"/>
                                            </g>
                                        </svg>
                                    </div>

                                    {!editButton && (<div className={styles.generatedButton} onClick={() => setEditButton(true)}>
                                        <span className={`${styles.tooltip} ${styles.tooltipE}`}>Edit</span>
                                        <svg className={styles.edit} width="26" height="26" xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 100 125">
                                            <path d="M82.6,2c-4,0-8,1.6-10.8,4.4L56.4,22H14C7.4,22,2,27.4,2,34v52c0,6.6,5.4,12,12,12h52c6.6,0,12-5.4,12-12V43.6L93.6,28  c6-6,6-15.6,0-21.6C90.6,3.6,86.8,2,82.6,2z M70,86c0,2.2-1.8,4-4,4H14c-2.2,0-4-1.8-4-4V34c0-2.2,1.8-4,4-4h34.4L34.6,43.8  c-8,8-12.6,18.8-12.4,30.2l0,0c0,2.2,1.8,4,4,4l0,0c11.4,0,22.2-4.4,30.2-12.4l13.8-13.8V86H70z M87.8,22.4L50.4,59.8  c-5.4,5.4-12.6,9-20.2,9.8c1-7.6,4.4-14.8,9.8-20.2L77.4,12c3-2.8,7.6-2.4,10.4,0.4C90.4,15.4,90.4,19.6,87.8,22.4z"/>
                                        </svg>
                                    </div>)}

                                    {!editButton && (<div className={styles.generatedButton}>
                                        <span className={`${styles.tooltip} ${styles.tooltipS}`}>Submit</span>
                                        <svg className={styles.submit} width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 20" x="0px" y="0px">
                                            <g fill="none" fill-rule="evenodd">
                                            <path d="m5.056 15.04c.629.622 1.658.567 2.217-.119l10.17-12.476c.523-.642.427-1.587-.215-2.11-.642-.523-1.587-.427-2.11.215l-9.111 11.208-3.453-3.41c-.589-.583-1.539-.577-2.121.012-.583.589-.577 1.539.012 2.121l4.611 4.56" fill="#000"/>
                                            </g>
                                        </svg>
                                    </div>)}
                                </div>)}
                            </div>
                        </div>  
                        }
                        size="normal"
                    />

                    {showPreview && !editButton && (<DashboardBento
                        name="Preview"
                        content={<div>
                            {loading && (<div className={styles.loadingContainer}>
                                <img src={loadingGif} alt='loading_gif' width="80" height="80"/>
                                <p className={styles.pulsating}>Generating response with AIâ€¦</p></div>)}

                            {!loading && showPreview && (<div className={styles.generatedTasksContainer}>
                                {Object.entries(result).map(([name, tasks]) => (
                                    <PromptedUser key={name} name={name} tasks={tasks.slice(0, 2)}/>
                                ))}
                            </div>)}
                        </div>
                        }
                        size="normal"
                    />)}

                    {editButton && (<DashboardBento
                        name="Edit"
                        content={<div>
                            <div className={styles.editTasksContainer}>
                                {Object.entries(result).map(([name, tasks]) => (
                                    <EditUser key={name} name={name} tasks={tasks}/>
                                ))}
                            </div>

                            <div className={styles.generatedButtonContainer}>
                                <div className={styles.generatedButton} onClick={() => setEditButton(false)}>
                                    <span className={`${styles.tooltip} ${styles.tooltipC}`}>Cancel</span>
                                    <svg className={styles.cancel} width="35" height="35" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-5.0 -10.0 110.0 135.0">
                                        <path d="m27.461 22.5c-1.2656 0-2.5352 0.48438-3.5039 1.457-1.9414 1.9414-1.9414 5.0703 0 7.0117l19.031 19.031-19.031 19.035c-1.9414 1.9414-1.9414 5.0664 0 7.0078 1.9414 1.9414 5.0703 1.9414 7.0117 0l19.031-19.031 19.031 19.031c1.9414 1.9414 5.0703 1.9414 7.0117 0 1.9414-1.9414 1.9414-5.0664 0-7.0078l-19.031-19.035 19.031-19.031c1.9414-1.9414 1.9414-5.0703 0-7.0117-1.9414-1.9414-5.0703-1.9414-7.0117 0l-19.031 19.031-19.031-19.031c-0.97266-0.97266-2.2383-1.457-3.5039-1.457z"/>
                                    </svg>
                                </div>

                                <div className={styles.generatedButton}>
                                    <span className={`${styles.tooltip} ${styles.tooltipS}`}>Submit</span>
                                    <svg className={styles.submit} width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 20" x="0px" y="0px">
                                        <g fill="none" fill-rule="evenodd">
                                        <path d="m5.056 15.04c.629.622 1.658.567 2.217-.119l10.17-12.476c.523-.642.427-1.587-.215-2.11-.642-.523-1.587-.427-2.11.215l-9.111 11.208-3.453-3.41c-.589-.583-1.539-.577-2.121.012-.583.589-.577 1.539.012 2.121l4.611 4.56" fill="#000"/>
                                        </g>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        }
                        size="wide"
                    />)}
                </div>

                <TaskBoard/>
            </div>

        </div>
    );
};

export default Dashboard;